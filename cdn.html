<script>
  // 1. –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º ID
  const scriptId = "git-templates-" + Date.now()
  const script = document.createElement("script")
  script.id = scriptId

  // 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GitHub Pages —Å timestamp –∏ —Ö–µ—à–µ–º
  script.src = `https://khrustalev-creative.github.io/git-templates/test.js?t=${Date.now()}`

  // 3. –î–æ–±–∞–≤–∏—Ç—å
  document.head.appendChild(script)

  // 4. –ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
  setInterval(() => {
    const newScript = document.createElement("script")
    newScript.id = "git-templates-" + Date.now()
    newScript.src = `https://khrustalev-creative.github.io/git-templates/test.js?t=${Date.now()}`

    // –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π
    const old = document.getElementById(scriptId)
    if (old) old.remove()

    // –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π
    document.head.appendChild(newScript)
  }, 5000)
</script>

<script>
  ;(function () {
    const VERSION = Date.now()
    const script = document.createElement("script")

    // –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫
    script.src = `https://khrustalev-creative.github.io/git-templates/test.js?t=${Date.now()}`

    // –ï—Å–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –∑–∞ 5 —Å–µ–∫—É–Ω–¥, –ø—Ä–æ–±—É–µ–º –¥—Ä—É–≥–æ–π
    const timeout = setTimeout(() => {
      script.remove()
      const fallback = document.createElement("script")
      fallback.src = `https://khrustalev-creative.github.io/git-templates/test.js?t=${Date.now()}`
      document.head.appendChild(fallback)
      console.log("Using fallback CDN")
    }, 5000)

    script.onload = () => clearTimeout(timeout)
    document.head.appendChild(script)
  })()
</script>


<script>
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞
  function loadAndUpdateScript() {
    const scriptId = "git-templates-" + Date.now()
    const script = document.createElement("script")
    script.id = scriptId
    script.src = `https://khrustalev-creative.github.io/git-templates/script.js?t=${Date.now()}`
    document.head.appendChild(script)
    
    return scriptId
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∏–ª–µ–π
  function loadAndUpdateStyles() {
    const styleId = "git-styles-" + Date.now()
    
    // –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Å—Ç–∏–ª–∏
    const oldStyles = document.querySelectorAll('link[href*="khrustalev-creative.github.io/git-templates/style.css"]')
    oldStyles.forEach(style => style.remove())
    
    // –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π link —ç–ª–µ–º–µ–Ω—Ç
    const link = document.createElement("link")
    link.id = styleId
    link.rel = "stylesheet"
    link.href = `https://khrustalev-creative.github.io/git-templates/style.css?t=${Date.now()}`
    document.head.appendChild(link)
    
    return styleId
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è - –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ä–∞–∑—É
  let currentScriptId = loadAndUpdateScript()
  loadAndUpdateStyles()

  // –ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ 60000 –¥–ª—è 60 —Å–µ–∫—É–Ω–¥)
  setInterval(() => {
    console.log('üîÑ –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è...')
    
    // –û–±–Ω–æ–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç
    const newScriptId = "git-templates-" + Date.now()
    const oldScript = document.getElementById(currentScriptId)
    
    if (oldScript) oldScript.remove()
    
    const newScript = document.createElement("script")
    newScript.id = newScriptId
    newScript.src = `https://khrustalev-creative.github.io/git-templates/script.js?t=${Date.now()}`
    document.head.appendChild(newScript)
    
    currentScriptId = newScriptId
    
    // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∏–ª–∏
    loadAndUpdateStyles()
    
    console.log('‚úÖ –°–∫—Ä–∏–ø—Ç –∏ —Å—Ç–∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã')
  }, 30000) // 30 —Å–µ–∫—É–Ω–¥
</script>